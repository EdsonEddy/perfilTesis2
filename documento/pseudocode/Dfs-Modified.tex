\begin{codebox}
\Procname{$\proc{Dfs-Modified}(G, u)$}
\li \For each vertex $v \in G.Adj[u]$ \Do
\li \If $v.visited \isequal \id{UNVISITED}$ and $v.distance \isequal u.distance + 1$ \Then
\li $v.visited \gets VISITED$
\li \If $v.distance \neq G.k$ \Then
\li \If $v.match \isequal -1$ or $\proc{Dfs-Modified}(G,v)$ \Then
\li $u.match \gets v$
\li $v.match \gets u$
\li return \id{TRUE}\End \End \End \End
\li return \id{FALSE}
\end{codebox}